<!DOCTYPE html>

<head>
    <meta charset="utf-8">
        <link rel="stylesheet" href="style.css">
            
            <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
            <script src="unicode2latex.js"></script>
<script src="plugins.js"></script>
            <script src="longpress.js"></script>
<script src="app.js"></script>
    <script src="textareahelper.js"></script>

            <script type="text/x-mathjax-config">

                                         MathJax.Hub.Config({
          asciimath2jax: {delimiters: [['`','`'],['``','``']]},
          AsciiMath: {displaystyle: false}
        });
    MathJax.Hub.Register.LoadHook("[MathJax]/extensions/asciimath2jax.js", function () {
    var AM = MathJax.Extension.asciimath2jax,
    CREATEPATTERNS = AM.createPatterns;
    AM.createPatterns = function () {
    var result = CREATEPATTERNS.call(this);
    this.match['``'].mode = ";mode=display";
    return result;
    };
    });
    MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
    var AM = MathJax.InputJax.AsciiMath;
    AM.postfilterHooks.Add(function (data) {
    if (data.script.type.match(/;mode=display/)) {
    data.math.root.display = "block"
    }
    return data;
    });
    });
                MathJax.Hub.Register.StartupHook("TeX Jax Ready", function() {
                                                 var TEX = MathJax.InputJax.TeX;
                                                 var MACROS = {
                                               //  "(" : "\\left(",
                                               //  ")" : "\\right)",
                                                 "‚ù¥" :"\\{",
                                                 "‚ùµ" :"\\}",
                                                 "‚àö": ["\\sqrt{#1}", 1],
                                                 "‚àõ":["\\sqrt[3]{#1}", 1],
                                                 "‚àú":["\\sqrt[4]{#1}", 1],
                                                 "‚à´": "\\int",
                                                 "‚àë": "\\sum",
                                                 "‚àè" :"\\prod",
                                                 //various integrals
                                                "‚à¨": "\\iint ",
                                                "‚à≠": "\\iiint",
                                                '‚®å' : "\\iiiint",
                                                "‚àÆ": "\\oint ",
                                                
                                                 "‚àñ" : "\\setminus", //note that this is not an ascii '\'
                                               //  "‚àï" :"\\over", //note that this is not an ascii '/'
                                                 "‚ñÅ" :"\\underline",
                                                 "‚Äæ" :"\\overline",
                                                 "‚èü":"\\underbrace",
                                                 "‚èû":"\\overbrace",
                                                 //"‚èù":"\\underparens",
                                                 //"‚èú" :"\\overparens",
                                                 "¬¶" : "\\choose",
                                                 //"\"" : "\\text",
                                                 "‚âî" : ":=",
                                               
                                                  "ùíú": "\\mathscr{A}",
                                                  "‚Ñ¨": "\\mathscr{B}",
                                                  "ùíû": "\\mathscr{C}",
                                                  "ùíü": "\\mathscr{D}",
                                                  "‚Ñ∞": "\\mathscr{E}",
                                                  "‚Ñ±": "\\mathscr{F}",
                                                  "ùí¢": "\\mathscr{G}",
                                                  "‚Ñã": "\\mathscr{H}",
                                                  "‚Ñê": "\\mathscr{I}",
                                                  "ùí•": "\\mathscr{J}",
                                                  "ùí¶": "\\mathscr{K}",
                                                  "‚Ñí": "\\mathscr{L}",
                                                  "‚Ñ≥": "\\mathscr{M}",    
                                                  "ùí©": "\\mathscr{N}",   
                                                  "ùí™": "\\mathscr{O}",   
                                                  "ùí´": "\\mathscr{P}",   
                                                  "ùí¨": "\\mathscr{Q}",   
                                                  "‚Ñõ": "\\mathscr{R}",   
                                                  "ùíÆ": "\\mathscr{S}",   
                                                  "ùíØ": "\\mathscr{T}",   
                                                  "ùí∞": "\\mathscr{U}",   
                                                  "ùí±": "\\mathscr{V}",   
                                                  "ùí≤": "\\mathscr{W}",   
                                                  "ùí≥": "\\mathscr{X}",   
                                                  "ùí¥": "\\marthscr{Y}", 
                                                  "ùíµ": "\\mathscr{Z}",
                                                
                                   "\uD538": "\\mathbb{A}",
    "\uD539": "\\mathbb{B}",
    "\uD53B": "\\mathbb{D}",
    "\uD53C": "\\mathbb{E}",
    "\uD53D": "\\mathbb{F}",
    "\uD53E": "\\mathbb{G}",
    "\uD540": "\\mathbb{I}",
    "\uD541": "\\mathbb{J}",
    "\uD542": "\\mathbb{K}",
    "\uD543": "\\mathbb{L}",
    "\uD544": "\\mathbb{M}",
    "\uD546": "\\mathbb{O}",
    "\uD54A": "\\mathbb{S}",
    "\uD54B": "\\mathbb{T}",
    "\uD54C": "\\mathbb{U}",
    "\uD54D": "\\mathbb{V}",
    "\uD54E": "\\mathbb{W}",
    "\uD54F": "\\mathbb{X}",
    "\uD550": "\\mathbb{Y}",
    "\uD552": "\\mathbb{a}",
    "\uD553": "\\mathbb{b}",
    "\uD554": "\\mathbb{c}",
    "\uD555": "\\mathbb{d}",
    "\uD556": "\\mathbb{e}",
    "\uD557": "\\mathbb{f}",
    "\uD558": "\\mathbb{g}",
    "\uD559": "\\mathbb{h}",
    "\uD55A": "\\mathbb{i}",
    "\uD55B": "\\mathbb{j}",
    "\uD55C": "\\mathbb{k}",
    "\uD55D": "\\mathbb{l}",
    "\uD55E": "\\mathbb{m}",
    "\uD55F": "\\mathbb{n}",
    "\uD560": "\\mathbb{o}",
    "\uD561": "\\mathbb{p}",
    "\uD562": "\\mathbb{q}",
    "\uD563": "\\mathbb{r}",
    "\uD564": "\\mathbb{s}",
    "\uD565": "\\mathbb{t}",
    "\uD566": "\\mathbb{u}",
    "\uD567": "\\mathbb{v}",
    "\uD568": "\\mathbb{w}",
    "\uD569": "\\mathbb{x}",
    "\uD56A": "\\mathbb{y}",
    "\uD56B": "\\mathbb{z}",     
        "\u2102": "\\mathbb{C}",
    "\u210D": "\\mathbb{H}",
    "\u2115": "\\mathbb{N}",
    "\u2119": "\\mathbb{P}",
    "\u211A": "\\mathbb{Q}",
    "\u211D": "\\mathbb{R}",
    "\u2124": "\\mathbb{Z}",
                                                 "‚î¥" : ["\\overset{#2}{#1}",2], 
                                                 "‚î¨" : ["\\underset{#2}{#1}",2], 
                                                 //would love to have it work like a‚î¥b instead
                                                 "‚Å∞" : "^0",
                                                 "¬π" : "^1",
                                                 "¬≤" : "^2",
                                                 "¬≥" : "^3",
                                                 "‚Å¥" : "^4",
                                                 "‚Åµ" : "^5",
                                                 "‚Å∂" : "^6",
                                                 "‚Å∑" : "^7",
                                                 "‚Å∏" : "^8",
                                                 "‚Åπ" : "^9",
                                                 "‚Å∫" : "^+",
                                                 "‚Åª" : "^-",
                                                 "‚Åø" :"^n",
                                                 "‚ÇÄ" : "_0",
                                                 "‚ÇÅ" : "_1",
                                                 "‚ÇÇ" : "_2",
                                                 "‚ÇÉ" : "_3",
                                                 "‚ÇÑ" : "_4",
                                                 "‚ÇÖ" : "_5",
                                                 "‚ÇÜ" : "_6",
                                                 "‚Çá" : "_7",
                                                 "‚Çà" : "_8",
                                                 "‚Çâ" : "_9",
                                                 "‚Çä" :"_+",
                                                 "‚Çã" :"_-"
                                                 
                                                 };
                                                 for (var id in MACROS) {
                                                 if (MACROS.hasOwnProperty(id)) {
                                                 TEX.Definitions.special[id] = "myMacro";
                                                 }
                                                 }
                                                 TEX.Parse.Augment({
                                                                   myMacro: function(c) {
                                                                   var args = [c].concat(MACROS[c] instanceof Array ? MACROS[c] : [MACROS[c]]);
                                                                   return this.Macro.apply(this, args);
                                                                   }
                                                                   });
                                                 });
                </script>
            <script type="text/x-mathjax-config">
             MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
                MathJax.InputJax.TeX.Definitions.letter = /[a-z\u03B1-\u03C9]/i
                console.log(MathJax.InputJax.TeX.Definitions);
                });
                MathJax.Hub.Config({
                                   "HTML-CSS": {
                                    availableFonts: [], preferredFont: null, // force Web fonts
                                    webFont: "Latin-Modern",
                                    undefinedFamily: "Cambria Math,STIXGeneral, 'Arial Unicode MS', serif",
                                    
                                   linebreaks: {
                                   automatic: true
                                   },
                                   EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
                                   },
                                   tex2jax: {
                                   inlineMath: [
                                                ["$", "$"],
                                                ["\\(", "\\)"],
                                                ["‚ÅÖ","‚ÅÜ"]
                                                ],
                                   displayMath: [
                                                 ["$$", "$$"],
                                                 ["\\[", "\\]"]
                                                 ],
                                   processEscapes: true
                                   },
                                   TeX: {
                                   noUndefined: {
                                   attributes: {
                                   mathcolor: "red",
                                   mathbackground: "#FFEEEE",
                                   mathsize: "90%"
                                   }
                                   },
                                   Macros: {
                                   href: "{}"
                                   }
                                   },
                                   messageStyle: "none"
                                   });

                </script>
            <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML-full">
                </script>

    <script src="tex_to_ctex.js"></script>
    <script src="ctex_to_tex.js"></script>
            <script type="text/javascript">
                function escapeRegExp(string) {
                    return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
                }
                function replaceAll(string, find, replace) {
                    return string.replace(new RegExp(escapeRegExp(find), 'g'), replace);
                }
                $(function() {
                  function makePreview() {
                  input = $('#latex').val().replace(/</g, "&lt;").replace(/>/g, "&gt;");
                  $('#preview').html(input);
                  MathJax.Hub.Queue(["Typeset", MathJax.Hub, "preview"]);
                  }
                  $('body').keyup(function() {
                      //$('#latex').val($('#ta').val());

                      if (true) {
                        tex_to_ctex();
                        ctex_to_tex();
                      }
                      function makePreview() {
                          input = $('#latex').val().replace(/</g, "&lt;").replace(/>/g, "&gt;");
                          $('#preview').html(input);
                          MathJax.Hub.Queue(["Typeset", MathJax.Hub, "preview"]);
                      }
                                  makePreview()
                                  });
                  $('body').bind('updated', function() {
                                 makePreview()
                                 });
                  makePreview();
                  });


                </script>
</head>

<body>
    <b>CoffeeTeX:</b><br>
    <textarea  id="ta" placeholder="Press and hold a key to select a math symbol. For example, hold R to get ‚Ñù or a to get Œ±. Wrap the symbol in $...$ to get LaTeX output."></textarea>
   <br><input id="checkbox" type="checkbox" >Show LaTeX<br>
    <textarea id="latex"></textarea>
<br>
    <strong>Mathjax Output (use \$...\$ to get $\LaTeX$ output):</strong>

    <div id="preview">
    </div>
    <script>
      
      
    </script>


</p>
  
</body>

</html>
